# ScalarDB ベンチマークツール: アクティブコンテキスト

## 現在の作業状況

ScalarDBベンチマークツールは、データベースのパフォーマンスを測定するために設計された一連のツールです。現在、プロジェクトには以下のベンチマークが実装されています：
- TPC-C ベンチマーク
- YCSB ベンチマーク（ワークロードA、C、F）
- マルチストレージYCSB ベンチマーク（ワークロードC、F）

プロジェクトは基本的な機能が実装されており、各ベンチマークが独立したモジュールとして動作します。

## 最近の変更点

プロジェクトの公開リポジトリには、以下の機能が実装されています：
- ベンチマーク実行のための基本的なフレームワーク構造
- TPC-Cの完全な実装
- YCSBの3つのワークロードパターン（A、C、F）の実装
- マルチストレージ環境でのYCSBベンチマーク実行サポート
- 柔軟な設定オプション

最近追加・更新された機能：
- READMEの中央化されたScalarDBドキュメントリポジトリへの参照
- 適切なエラーハンドリングの実装
- パフォーマンス最適化の改善

## 次のステップ

短期的な改善点：
1. 他のYCSBワークロード（B、D、E）の実装検討
2. より詳細なパフォーマンスメトリクスの収集
3. 異なるデータベースバックエンドでの検証テストの拡充

中長期的な改善点：
1. より新しいJDKバージョンのサポート
2. カスタムワークロードの定義機能の追加
3. グラフィカルな結果レポート機能
4. 継続的インテグレーション環境での自動ベンチマーク実行

## アクティブな意思決定と考慮事項

### パフォーマンス測定の正確性
- トランザクション実行時間の測定方法の標準化
- リトライによる影響を考慮したレポーティング
- ウォームアップ期間（ramp_for_sec）の適切な設定の推奨

### ワークロードの設計
- 実際のアプリケーションパターンを反映したワークロード構成
- 複数のストレージを使用するアプリケーションのテスト方法

### 技術的な負債
- JDK 8依存による将来的な互換性の課題
- エラー処理とリトライロジックの改善余地
- テスト網羅率の向上

## 学びとプロジェクトの洞察

### ベンチマーク設計の知見
- データベースのパフォーマンス特性は、ワークロードパターンによって大きく異なる
- トランザクションの分離レベルとスループットのトレードオフの重要性
- 適切なインデックス戦略がパフォーマンスに与える影響

### ScalarDB固有の特性
- マルチストレージ環境でのトランザクション処理の複雑さ
- 競合解決メカニズムとバックオフ戦略の効果
- 様々なバックエンドデータベースでの挙動の違い

### ユーザーフィードバック
- より簡単なセットアッププロセスへの要望
- クラウド環境での実行に関するガイダンスの必要性
- 標準的なベンチマーク結果の参照データへのアクセス

## 重要なパターンと設定

### 推奨設定
- 適切なワークロード選択：
  - トランザクション処理の評価にはTPC-C
  - 基本的なCRUD操作のスケーラビリティ評価にはYCSB
- パフォーマンステスト時の推奨パラメータ：
  - 十分な`run_for_sec`（最低300秒）
  - 適切な`ramp_for_sec`でJVMウォームアップを確保（最低60秒）
  - 環境に応じた`concurrency`の調整

### トラブルシューティングパターン
- トランザクション競合率が高い場合の`backoff`値の調整
- メモリ不足エラーが発生した場合のJVMヒープサイズの増加
- データロード時の`load_concurrency`とバッチサイズの調整

### ベンチマーク実行戦略
1. 小規模な設定での初期テスト実行
2. システムリソースのモニタリング
3. ボトルネックの特定（CPU、メモリ、ネットワーク、ディスクI/O）
4. パラメータ調整と再テスト
5. スケールを拡大した本番的なテスト実行
